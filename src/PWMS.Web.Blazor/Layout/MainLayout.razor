@inherits LayoutComponentBase
<MudLayout>
    <AuthorizeView>
        <Authorized>
            <MudAppBar Color="Color.Primary">
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="ToggleDrawer" />
                <MudSpacer />
                <MudMenu FullWidth="true" AnchorOrigin="Origin.BottomCenter">
                    <ActivatorContent>
                        <MudChip T="string"
                                 Icon="@Icons.Material.Filled.Person"
                                 Color="Color.Primary">@context.User.Claims.FirstOrDefault(c => c.Type == "username")?.Value</MudChip>
                    </ActivatorContent>
                    <ChildContent>
                        <MudMenuItem>Profile</MudMenuItem>
                        <MudMenuItem>Logout</MudMenuItem>
                    </ChildContent>
                </MudMenu>
            </MudAppBar>
            <MudDrawer @bind-Open="@_open" Elevation="1" Variant="@DrawerVariant.Persistent" ClipMode="DrawerClipMode.Docked">
                <NavMenu />
            </MudDrawer>
            <MudMainContent>
                @Body
            </MudMainContent>
        </Authorized>
        <NotAuthorized>
            <MudMainContent>
                @Body
            </MudMainContent>
        </NotAuthorized>
    </AuthorizeView>
</MudLayout>

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

@code {
    private bool _open = false;

    private void ToggleDrawer()
    {
        _open = !_open;
    }
}